{% extends 'base.html' %}
{% block content %}
  <h2>Manage</h2>
  <h3>Your pools</h3>
  {% if owned_pools %}
    <ul>
    {% for p in owned_pools %}
      <li>{{ p.title }} — <a href="{{ url_for('main.pool_detail', pool_id=p.id) }}">view</a>
        <ul>
          {% for jr in p.join_requests %}
            <li>{{ jr.requester.username }}: {{ jr.status }} — <a href="{{ url_for('main.handle_request', req_id=jr.id, action='accept') }}">accept</a> | <a href="{{ url_for('main.handle_request', req_id=jr.id, action='reject') }}">reject</a></li>
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p>You do not own any pools.</p>
  {% endif %}

  <h3>Your join requests</h3>
  {% if my_requests %}
    <ul>
    {% for r in my_requests %}
      <li>{{ r.pool.title }} — {{ r.status }}</li>
    {% endfor %}
    </ul>
  {% else %}
    <p>No requests.</p>
  {% endif %}
{% endblock %}